---
controller_validate_certs: false
controller_configuration_async_delay: 3

controller_credential_types:
  - name: Private Automation Hub API Access
    kind: cloud
    description: >-
      Credentials used by the infra.ah_configuration collection for
      API access to a private automation hub
    inputs:
      fields:
        - id: ah_host
          type: string
          label: Private Automation Hub Hostname
        - id: ah_username
          type: string
          label: Private Automation Hub Username
        - id: ah_password
          type: string
          label: Private Automation Hub Password
          secret: true
        - id: ah_token
          type: string
          label: Private Automation Hub Token
          secret: true
      required:
        - ah_host
    injectors:
      env:
        AH_HOST: !unsafe '{{ ah_host }}'
        AH_USERNAME: !unsafe '{{ ah_username }}'
        AH_PASSWORD: !unsafe '{{ ah_password }}'
        AH_TOKEN: !unsafe '{{ ah_token }}'

controller_credentials:
  - name: Controller Credential
    organization: Default
    credential_type: Red Hat Ansible Automation Platform
    inputs:
      host: https://{{ groups.automationcontroller[0] }}:8443
      username: admin
      password: '{{ controller_admin_password }}'
      # set to false when using self-signed certs
      verify_ssl: false
  - name: AAP Configuration deploy key
    organization: Default
    credential_type: Source Control
    inputs:
      username: ''
      password: ''
      ssh_key_data: '{{ vault_deploy_key_private_data | default("") }}'
      ssh_key_unlock: ''
  - name: AAP Private Automation Hub Credential
    organization: Default
    credential_type: Private Automation Hub API Access
    inputs:
      ah_host: https://{{ groups.automationhub[0] }}:8444
      ah_username: admin
      ah_password: '{{ hub_admin_password }}'

controller_execution_environments:
  - name: Product Demos EE
    image: quay.io/acme_corp/product-demos-ee:latest

controller_inventories:
  - name: AAP Inventory
    organization: Default

controller_hosts:
  - name: localhost
    inventory: AAP Inventory
    enabled: true
  - name: '{{ groups.automationcontroller[0] }}'
    inventory: AAP Inventory
    enabled: true

controller_projects:
  - name: AAP Configuration
    organization: Default
    scm_branch: main
    scm_type: git
    scm_url: git@gitlab.com:jce_redhat/aap-configuration.git
    credential: AAP Configuration deploy key

controller_templates:
  - name: AAP | Controller configuration
    job_type: run
    inventory: AAP Inventory
    execution_environment: Product Demos EE
    project: AAP Configuration
    playbook: aap-config.yml
    credentials:
      - Controller Credential
    ask_verbosity_on_launch: true

...
